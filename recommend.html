<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Ｎ｜推薦</title>
    <link rel="icon" href="img/favicon.ico">
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Koulen&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&family=Noto+Serif+TC&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&family=Noto+Serif+TC&display=swap" rel="stylesheet">
    <script src="data.js"></script>
    <script>
        function generateImg(){
            var seed = Math.floor(Math.random() * film.length);
            var new_src = pic[seed];
            document.getElementById("rnd_img").setAttribute("src", new_src);
        }
        var urlNow;
        var newInterval;
        function rnd(){
            document.getElementById("rec_name").innerHTML = "";
            var status = document.getElementById("rec_button").innerHTML;
            if(status == "Recommend"){
                document.getElementById("rec_name").style.animation ="";
                document.getElementById("rec_button").innerHTML = "Stop!";
                document.getElementById("linkO").style.visibility = "hidden";
                newInterval = setInterval(generateImg, 100);
            }
            else{
                document.getElementById("rec_button").innerHTML = "Recommend";
                clearInterval(newInterval);
                showRec(document.getElementById("rnd_img").src);
            }
        }

        function showRec(srcNow){
            for(var i=0; i<10; i++){
                if(srcNow == pic[i]){
                    document.getElementById("rec_name").innerHTML = film[i];
                    document.getElementById("rec_name").style.animation = "showName 0.3s linear 1";
                    document.getElementById("linkToN").setAttribute("href", link[i]);
                    document.getElementById("linkO").style.visibility = "visible";
                    document.getElementById("rec_name").addEventListener("mouseover", function(){
                        document.getElementById("linkO").style.backgroundImage = "url(" + pic[i] + ")";
                        document.getElementById("rnd_img").style.opacity = "0.2";
                    });
                    document.getElementById("linkO").addEventListener("mouseover", function(){
                        document.getElementById("linkO").style.backgroundImage = "url(" + pic[i] + ")";
                        document.getElementById("rnd_img").style.opacity = "0.2";
                    });
                    document.getElementById("rec_name").addEventListener("mouseleave", function(){
                        document.getElementById("linkO").style.backgroundImage = "";
                        document.getElementById("rnd_img").style.opacity = "1";
                    });
                    document.getElementById("linkO").addEventListener("mouseleave", function(){
                        document.getElementById("linkO").style.backgroundImage = "";
                        document.getElementById("rnd_img").style.opacity = "1";
                    });
                    break;
                }
            }
        }

        function greet(){
            var n = greeting.length;
            var seed = Math.floor(Math.random() * n);
            document.getElementById("greet").innerHTML = greeting[seed];
        }
    </script>
</head>
<body id="rec_body">
    <div class="banner">
        <span class="blank_space"><a class="link" href="index.html">N</a></span>
        <span class="label"><a class="link" href="index.html">首頁</a></span>
        <span class="label"><a class="link" href="login.html">登入</a></span>
        <span class="label"><a class="link" href="game.html">遊戲</a></span>
        <span class="label"><a class="link" href="quiz.html">QUIZ</a></span>
        <span id="greet" onclick="greet();"></span>
        <span id="wh" class="material-symbols-outlined">waving_hand</span>
    </div>
    <script>greet();</script>
    <div id="rec_name"></div>
    <img id="rnd_img" src="img/0.webp">
    <button id="rec_button" onclick="rnd();">Recommend</button>
    <div id="linkO"><a id="linkToN" target="_blank"><span id="arrow">►</span></a></div>
</body>
</html>